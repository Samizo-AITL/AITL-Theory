# 自己修復推論（Self-Repair Reasoning）

## 概要

AITLにおける **自己修復推論** とは、システムの異常や障害に対して、  
自律的に原因を推論し、対応策を導出・実行するメカニズムです。  
これは単なるエラー検出にとどまらず、**意味づけ・診断・対処・再構成**を統合した、  
AITL推論層の拡張機能です。

---

## 自己修復の階層構造

| フェーズ | 機能 |
|----------|------|
| 検出     | 状態の異常値・不整合の発見（しきい値、統計的異常検知など） |
| 診断     | 原因の推論（ルールベース、ベイズ推論、因果モデル） |
| 対処     | 回避行動・リトライ・フェイルセーフ遷移 |
| 学習     | 修復結果を基にルール・モデルを更新 |

---

## 推論モデルの例

### 1. ルールベース診断（例：Prolog風）
```
sensor(A) ∧ sensor(B) ∧ A ≠ B → inconsistent_data
inconsistent_data → switch_to_diagnosis_mode
```
### 2. ベイズネットワークによる故障診断

- センサ故障の確率を推定し、原因ノードの信頼度を動的に更新
- P(H|D) に基づく事後確率評価によって障害判断

### 3. 因果グラフ（Causal Graph）

- イベント連鎖の構造的表現  
- do-calculus による介入の因果効果推定  
- Pearlの因果モデルとの統合が可能

---

## 応用例（AITL-R, SkyEdge）

| 応用対象         | 内容                                                |
|------------------|-----------------------------------------------------|
| ロボットセンサ異常 | 指令値と実測値の不一致 → センサ切替または補間       |
| ドローン姿勢逸脱   | 風や故障の可能性 → 再キャリブレーションまたは緊急降下 |
| インクジェット動作失敗 | ノズル詰まり → クリーニング処理 → 印刷再実行判定     |

---

## 実装アーキテクチャ例
```
[観測入力]
↓
[異常検出モジュール]
↓
[自己診断エンジン]（ルール / ベイズ / 因果モデル）
↓
[修復計画生成]
↓
[制御層への修復指令送信]
```　
---

## AITL全体との接続

- **推論層**：意味ベースの異常解析と修復戦略選定  
- **制御層**：対処アクションの実行指令を生成  
- **物理層**：実際のセンサ・アクチュエータ動作とフィードバック

---

## 今後の拡張

- 自己修復 × 強化学習：経験的修復戦略の学習と適応  
- POMDPとの連携：不完全観測下でも信念状態に基づく修復判断  
- 協調修復：複数エージェント間での役割分担と相互診断

---

## 参考文献

- [1] Judea Pearl, *Causality: Models, Reasoning and Inference*, 2009  
- [2] M. Blanke et al., *Diagnosis and Fault-Tolerant Control*, 2016  
- [3] 三溝 真一, 『AITL自己修復理論概論』, 2025  

---
